import 'ezdo.tree.esm.css';import e from"ezdo";class t extends e.Node{constructor(){super(),this.addClass("ezdo-tree"),this._ez_s_handler=null,this._ez_s_caller=null,this._ez_lastActiveNode=null,this.selectIndex=0}setSelect(e,t){this._ez_s_handler=e,this._ez_s_caller=t}setData(e){this._render(e,this)}_render(t,s){let l=new e.Node("ul");s.add(l),t.forEach((t,d)=>{let i=new e.Node("li");l.add(i);let a=new e.Node;a.addClass("item-ico"),i.add(a),i.text=t.name,i.data=t,i.isFolder=t.children&&t.children.length,i.isOpen=!1,i.on("click",this._select,this),i.isFolder?a.text="+":a.text="-",this.selectIndex===d&&s===this&&this._select(i)})}_select(e){e.isFolder?(e.isOpen?(e.children[0].text="+",e.remove(e.children[2])):(e.children[0].text="-",this._render(e.data.children,e)),e.isOpen=!e.isOpen):(this._ez_lastActiveNode&&this._ez_lastActiveNode.removeClass("active"),e.addClass("active"),this._ez_lastActiveNode=e),this._ez_s_handler&&this._ez_s_handler.bind(this._ez_s_caller)(e.data)}}export default t;
